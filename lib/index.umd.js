!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).FE_utils={},t.vue)}(this,(function(t,e){"use strict";var r=function(){return r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};function n(t,e,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function i(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!l(t[0])||!l(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,r)}function o(t,e,r){void 0===r&&(r={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,r)}function a(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,r)}function s(t,e){void 0===e&&(e={});var r={type:"FeatureCollection"};return e.id&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.features=t,r}function u(t){return t%360*Math.PI/180}function l(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function c(t,e,r){if(null!==t)for(var n,i,o,a,s,u,l,h,f=0,m=0,d=t.type,p="FeatureCollection"===d,g="Feature"===d,y=p?t.features.length:1,v=0;v<y;v++){s=(h=!!(l=p?t.features[v].geometry:g?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var x=0;x<s;x++){var b=0,M=0;if(null!==(a=h?l.geometries[x]:l)){u=a.coordinates;var w=a.type;switch(f=!r||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(u,m,v,b,M))return!1;m++,b++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(!1===e(u[n],m,v,b,M))return!1;m++,"MultiPoint"===w&&b++}"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(i=0;i<u[n].length-f;i++){if(!1===e(u[n][i],m,v,b,M))return!1;m++}"MultiLineString"===w&&b++,"Polygon"===w&&M++}"Polygon"===w&&b++;break;case"MultiPolygon":for(n=0;n<u.length;n++){for(M=0,i=0;i<u[n].length;i++){for(o=0;o<u[n][i].length-f;o++){if(!1===e(u[n][i][o],m,v,b,M))return!1;m++}M++}b++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===c(a.geometries[n],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function h(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}function f(t,e){var r,n,i,o,a,s,u,l,c,h,f=0,m="FeatureCollection"===t.type,d="Feature"===t.type,p=m?t.features.length:1;for(r=0;r<p;r++){for(s=m?t.features[r].geometry:d?t.geometry:t,l=m?t.features[r].properties:d?t.properties:{},c=m?t.features[r].bbox:d?t.bbox:void 0,h=m?t.features[r].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,l,c,h))return!1;break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(!1===e(o.geometries[n],f,l,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,c,h))return!1;f++}}function m(t){var e=[1/0,1/0,-1/0,-1/0];return c(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function d(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function p(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function g(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}"function"==typeof SuppressedError&&SuppressedError,m.default=m;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function y(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function v(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var r=function t(){return this instanceof t?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var n=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(r,e,n.get?n:{enumerable:!0,get:function(){return t[e]}})})),r}var x={exports:{}};function b(t,e,r,n,i){M(t,e,r||0,n||t.length-1,i||P)}function M(t,e,r,n,i){for(;n>r;){if(n-r>600){var o=n-r+1,a=e-r+1,s=Math.log(o),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);M(t,e,Math.max(r,Math.floor(e-a*u/o+l)),Math.min(n,Math.floor(e+(o-a)*u/o+l)),i)}var c=t[e],h=r,f=n;for(w(t,r,e),i(t[n],c)>0&&w(t,r,n);h<f;){for(w(t,h,f),h++,f--;i(t[h],c)<0;)h++;for(;i(t[f],c)>0;)f--}0===i(t[r],c)?w(t,r,f):w(t,++f,n),f<=e&&(r=f+1),e<=f&&(n=f-1)}}function w(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function P(t,e){return t<e?-1:t>e?1:0}function _(t,e,r){if(!r)return e.indexOf(t);for(let n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function E(t,e){S(t,0,t.children.length,e,t)}function S(t,e,r,n,i){i||(i=R(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let o=e;o<r;o++){const e=t.children[o];X(i,t.leaf?n(e):e)}return i}function X(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Y(t,e){return t.minX-e.minX}function B(t,e){return t.minY-e.minY}function L(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function A(t){return t.maxX-t.minX+(t.maxY-t.minY)}function k(t,e){const r=Math.max(t.minX,e.minX),n=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-r)*Math.max(0,o-n)}function F(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function O(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function R(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function C(t,e,r,n,i){const o=[e,r];for(;o.length;){if((r=o.pop())-(e=o.pop())<=n)continue;const a=e+Math.ceil((r-e)/n/2)*n;b(t,a,e,r,i),o.push(e,a,a,r)}}var j=Object.freeze({__proto__:null,default:class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const r=[];if(!O(t,e))return r;const n=this.toBBox,i=[];for(;e;){for(let o=0;o<e.children.length;o++){const a=e.children[o],s=e.leaf?n(a):a;O(t,s)&&(e.leaf?r.push(a):F(t,s)?this._all(a,r):i.push(a))}e=i.pop()}return r}collides(t){let e=this.data;if(!O(t,e))return!1;const r=[];for(;e;){for(let n=0;n<e.children.length;n++){const i=e.children[n],o=e.leaf?this.toBBox(i):i;if(O(t,o)){if(e.leaf||F(t,o))return!0;r.push(i)}}e=r.pop()}return!1}load(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(let e=0;e<t.length;e++)this.insert(t[e]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const t=this.data;this.data=e,e=t}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=R([]),this}remove(t,e){if(!t)return this;let r=this.data;const n=this.toBBox(t),i=[],o=[];let a,s,u;for(;r||i.length;){if(r||(r=i.pop(),s=i[i.length-1],a=o.pop(),u=!0),r.leaf){const n=_(t,r.children,e);if(-1!==n)return r.children.splice(n,1),i.push(r),this._condense(i),this}u||r.leaf||!F(r,n)?s?(a++,r=s.children[a],u=!1):r=null:(i.push(r),o.push(a),a=0,s=r,r=r.children[0])}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const r=[];for(;t;)t.leaf?e.push(...t.children):r.push(...t.children),t=r.pop();return e}_build(t,e,r,n){const i=r-e+1;let o,a=this._maxEntries;if(i<=a)return o=R(t.slice(e,r+1)),E(o,this.toBBox),o;n||(n=Math.ceil(Math.log(i)/Math.log(a)),a=Math.ceil(i/Math.pow(a,n-1))),o=R([]),o.leaf=!1,o.height=n;const s=Math.ceil(i/a),u=s*Math.ceil(Math.sqrt(a));C(t,e,r,u,this.compareMinX);for(let i=e;i<=r;i+=u){const e=Math.min(i+u-1,r);C(t,i,e,s,this.compareMinY);for(let r=i;r<=e;r+=s){const i=Math.min(r+s-1,e);o.children.push(this._build(t,r,i,n-1))}}return E(o,this.toBBox),o}_chooseSubtree(t,e,r,n){for(;n.push(e),!e.leaf&&n.length-1!==r;){let r,n=1/0,a=1/0;for(let s=0;s<e.children.length;s++){const u=e.children[s],l=L(u),c=(i=t,o=u,(Math.max(o.maxX,i.maxX)-Math.min(o.minX,i.minX))*(Math.max(o.maxY,i.maxY)-Math.min(o.minY,i.minY))-l);c<a?(a=c,n=l<n?l:n,r=u):c===a&&l<n&&(n=l,r=u)}e=r||e.children[0]}var i,o;return e}_insert(t,e,r){const n=r?t:this.toBBox(t),i=[],o=this._chooseSubtree(n,this.data,e,i);for(o.children.push(t),X(o,n);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(n,i,e)}_split(t,e){const r=t[e],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);const o=this._chooseSplitIndex(r,i,n),a=R(r.children.splice(o,r.children.length-o));a.height=r.height,a.leaf=r.leaf,E(r,this.toBBox),E(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(r,a)}_splitRoot(t,e){this.data=R([t,e]),this.data.height=t.height+1,this.data.leaf=!1,E(this.data,this.toBBox)}_chooseSplitIndex(t,e,r){let n,i=1/0,o=1/0;for(let a=e;a<=r-e;a++){const e=S(t,0,a,this.toBBox),s=S(t,a,r,this.toBBox),u=k(e,s),l=L(e)+L(s);u<i?(i=u,n=a,o=l<o?l:o):u===i&&l<o&&(o=l,n=a)}return n||r-e}_chooseSplitAxis(t,e,r){const n=t.leaf?this.compareMinX:Y,i=t.leaf?this.compareMinY:B;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,i)&&t.children.sort(n)}_allDistMargin(t,e,r,n){t.children.sort(n);const i=this.toBBox,o=S(t,0,e,i),a=S(t,r-e,r,i);let s=A(o)+A(a);for(let n=e;n<r-e;n++){const e=t.children[n];X(o,t.leaf?i(e):e),s+=A(o)}for(let n=r-e-1;n>=e;n--){const e=t.children[n];X(a,t.leaf?i(e):e),s+=A(a)}return s}_adjustParentBBoxes(t,e,r){for(let n=r;n>=0;n--)X(e[n],t)}_condense(t){for(let e,r=t.length-1;r>=0;r--)0===t[r].children.length?r>0?(e=t[r-1].children,e.splice(e.indexOf(t[r]),1)):this.clear():E(t[r],this.toBBox)}}}),I=v(j);function N(t,e){return t<e?-1:t>e?1:0}var T=v(Object.freeze({__proto__:null,default:class{constructor(t=[],e=N){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:r}=this,n=e[t];for(;t>0;){const i=t-1>>1,o=e[i];if(r(n,o)>=0)break;e[t]=o,t=i}e[t]=n}_down(t){const{data:e,compare:r}=this,n=this.length>>1,i=e[t];for(;t<n;){let n=1+(t<<1),o=e[n];const a=n+1;if(a<this.length&&r(e[a],o)<0&&(n=a,o=e[a]),r(o,i)>=0)break;e[t]=o,t=n}e[t]=i}}})),G={exports:{}},D=function(t,e,r,n){var i=t[0],o=t[1],a=!1;void 0===r&&(r=0),void 0===n&&(n=e.length);for(var s=(n-r)/2,u=0,l=s-1;u<s;l=u++){var c=e[r+2*u+0],h=e[r+2*u+1],f=e[r+2*l+0],m=e[r+2*l+1];h>o!=m>o&&i<(f-c)*(o-h)/(m-h)+c&&(a=!a)}return a},q=function(t,e,r,n){var i=t[0],o=t[1],a=!1;void 0===r&&(r=0),void 0===n&&(n=e.length);for(var s=n-r,u=0,l=s-1;u<s;l=u++){var c=e[u+r][0],h=e[u+r][1],f=e[l+r][0],m=e[l+r][1];h>o!=m>o&&i<(f-c)*(o-h)/(m-h)+c&&(a=!a)}return a};G.exports=function(t,e,r,n){return e.length>0&&Array.isArray(e[0])?q(t,e,r,n):D(t,e,r,n)},G.exports.nested=q,G.exports.flat=D;var J=G.exports,z={exports:{}};!function(t,e){!function(t){const e=134217729,r=33306690738754706e-32;function n(t,e,r,n,i){let o,a,s,u,l=e[0],c=n[0],h=0,f=0;c>l==c>-l?(o=l,l=e[++h]):(o=c,c=n[++f]);let m=0;if(h<t&&f<r)for(c>l==c>-l?(s=o-((a=l+o)-l),l=e[++h]):(s=o-((a=c+o)-c),c=n[++f]),o=a,0!==s&&(i[m++]=s);h<t&&f<r;)c>l==c>-l?(s=o-((a=o+l)-(u=a-o))+(l-u),l=e[++h]):(s=o-((a=o+c)-(u=a-o))+(c-u),c=n[++f]),o=a,0!==s&&(i[m++]=s);for(;h<t;)s=o-((a=o+l)-(u=a-o))+(l-u),l=e[++h],o=a,0!==s&&(i[m++]=s);for(;f<r;)s=o-((a=o+c)-(u=a-o))+(c-u),c=n[++f],o=a,0!==s&&(i[m++]=s);return 0===o&&0!==m||(i[m++]=o),m}function i(t){return new Float64Array(t)}const o=33306690738754716e-32,a=22204460492503146e-32,s=11093356479670487e-47,u=i(4),l=i(8),c=i(12),h=i(16),f=i(4);t.orient2d=function(t,i,m,d,p,g){const y=(i-g)*(m-p),v=(t-p)*(d-g),x=y-v;if(0===y||0===v||y>0!=v>0)return x;const b=Math.abs(y+v);return Math.abs(x)>=o*b?x:-function(t,i,o,m,d,p,g){let y,v,x,b,M,w,P,_,E,S,X,Y,B,L,A,k,F,O;const R=t-d,C=o-d,j=i-p,I=m-p;M=(A=(_=R-(P=(w=e*R)-(w-R)))*(S=I-(E=(w=e*I)-(w-I)))-((L=R*I)-P*E-_*E-P*S))-(X=A-(F=(_=j-(P=(w=e*j)-(w-j)))*(S=C-(E=(w=e*C)-(w-C)))-((k=j*C)-P*E-_*E-P*S))),u[0]=A-(X+M)+(M-F),M=(B=L-((Y=L+X)-(M=Y-L))+(X-M))-(X=B-k),u[1]=B-(X+M)+(M-k),M=(O=Y+X)-Y,u[2]=Y-(O-M)+(X-M),u[3]=O;let N=function(t,e){let r=e[0];for(let n=1;n<t;n++)r+=e[n];return r}(4,u),T=a*g;if(N>=T||-N>=T)return N;if(y=t-(R+(M=t-R))+(M-d),x=o-(C+(M=o-C))+(M-d),v=i-(j+(M=i-j))+(M-p),b=m-(I+(M=m-I))+(M-p),0===y&&0===v&&0===x&&0===b)return N;if(T=s*g+r*Math.abs(N),(N+=R*b+I*y-(j*x+C*v))>=T||-N>=T)return N;M=(A=(_=y-(P=(w=e*y)-(w-y)))*(S=I-(E=(w=e*I)-(w-I)))-((L=y*I)-P*E-_*E-P*S))-(X=A-(F=(_=v-(P=(w=e*v)-(w-v)))*(S=C-(E=(w=e*C)-(w-C)))-((k=v*C)-P*E-_*E-P*S))),f[0]=A-(X+M)+(M-F),M=(B=L-((Y=L+X)-(M=Y-L))+(X-M))-(X=B-k),f[1]=B-(X+M)+(M-k),M=(O=Y+X)-Y,f[2]=Y-(O-M)+(X-M),f[3]=O;const G=n(4,u,4,f,l);M=(A=(_=R-(P=(w=e*R)-(w-R)))*(S=b-(E=(w=e*b)-(w-b)))-((L=R*b)-P*E-_*E-P*S))-(X=A-(F=(_=j-(P=(w=e*j)-(w-j)))*(S=x-(E=(w=e*x)-(w-x)))-((k=j*x)-P*E-_*E-P*S))),f[0]=A-(X+M)+(M-F),M=(B=L-((Y=L+X)-(M=Y-L))+(X-M))-(X=B-k),f[1]=B-(X+M)+(M-k),M=(O=Y+X)-Y,f[2]=Y-(O-M)+(X-M),f[3]=O;const D=n(G,l,4,f,c);M=(A=(_=y-(P=(w=e*y)-(w-y)))*(S=b-(E=(w=e*b)-(w-b)))-((L=y*b)-P*E-_*E-P*S))-(X=A-(F=(_=v-(P=(w=e*v)-(w-v)))*(S=x-(E=(w=e*x)-(w-x)))-((k=v*x)-P*E-_*E-P*S))),f[0]=A-(X+M)+(M-F),M=(B=L-((Y=L+X)-(M=Y-L))+(X-M))-(X=B-k),f[1]=B-(X+M)+(M-k),M=(O=Y+X)-Y,f[2]=Y-(O-M)+(X-M),f[3]=O;const q=n(D,c,4,f,h);return h[q-1]}(t,i,m,d,p,g,b)},t.orient2dfast=function(t,e,r,n,i,o){return(e-o)*(r-i)-(t-i)*(n-o)},Object.defineProperty(t,"__esModule",{value:!0})}(e)}(0,z.exports);var U=I,V=T,Z=J,$=z.exports.orient2d;function H(t,e,r){e=Math.max(0,void 0===e?2:e),r=r||0;var n=function(t){for(var e=t[0],r=t[0],n=t[0],i=t[0],o=0;o<t.length;o++){var a=t[o];a[0]<e[0]&&(e=a),a[0]>n[0]&&(n=a),a[1]<r[1]&&(r=a),a[1]>i[1]&&(i=a)}var s=[e,r,n,i],u=s.slice();for(o=0;o<t.length;o++)Z(t[o],s)||u.push(t[o]);return function(t){t.sort(ut);for(var e=[],r=0;r<t.length;r++){for(;e.length>=2&&rt(e[e.length-2],e[e.length-1],t[r])<=0;)e.pop();e.push(t[r])}for(var n=[],i=t.length-1;i>=0;i--){for(;n.length>=2&&rt(n[n.length-2],n[n.length-1],t[i])<=0;)n.pop();n.push(t[i])}return n.pop(),e.pop(),e.concat(n)}(u)}(t),i=new U(16);i.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},i.compareMinX=function(t,e){return t[0]-e[0]},i.compareMinY=function(t,e){return t[1]-e[1]},i.load(t);for(var o,a=[],s=0;s<n.length;s++){var u=n[s];i.remove(u),o=it(u,o),a.push(o)}var l=new U(16);for(s=0;s<a.length;s++)l.insert(nt(a[s]));for(var c=e*e,h=r*r;a.length;){var f=a.shift(),m=f.p,d=f.next.p,p=ot(m,d);if(!(p<h)){var g=p/c;(u=K(i,f.prev.p,m,d,f.next.next.p,g,l))&&Math.min(ot(u,m),ot(u,d))<=g&&(a.push(f),a.push(it(u,f)),i.remove(u),l.remove(f),l.insert(nt(f)),l.insert(nt(f.next)))}}f=o;var y=[];do{y.push(f.p),f=f.next}while(f!==o);return y.push(f.p),y}function K(t,e,r,n,i,o,a){for(var s=new V([],Q),u=t.data;u;){for(var l=0;l<u.children.length;l++){var c=u.children[l],h=u.leaf?at(c,r,n):W(r,n,c);h>o||s.push({node:c,dist:h})}for(;s.length&&!s.peek().node.children;){var f=s.pop(),m=f.node,d=at(m,e,r),p=at(m,n,i);if(f.dist<d&&f.dist<p&&et(r,m,a)&&et(n,m,a))return m}(u=s.pop())&&(u=u.node)}return null}function Q(t,e){return t.dist-e.dist}function W(t,e,r){if(tt(t,r)||tt(e,r))return 0;var n=st(t[0],t[1],e[0],e[1],r.minX,r.minY,r.maxX,r.minY);if(0===n)return 0;var i=st(t[0],t[1],e[0],e[1],r.minX,r.minY,r.minX,r.maxY);if(0===i)return 0;var o=st(t[0],t[1],e[0],e[1],r.maxX,r.minY,r.maxX,r.maxY);if(0===o)return 0;var a=st(t[0],t[1],e[0],e[1],r.minX,r.maxY,r.maxX,r.maxY);return 0===a?0:Math.min(n,i,o,a)}function tt(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function et(t,e,r){for(var n,i,o,a,s=Math.min(t[0],e[0]),u=Math.min(t[1],e[1]),l=Math.max(t[0],e[0]),c=Math.max(t[1],e[1]),h=r.search({minX:s,minY:u,maxX:l,maxY:c}),f=0;f<h.length;f++)if(n=h[f].p,i=h[f].next.p,o=t,n!==(a=e)&&i!==o&&rt(n,i,o)>0!=rt(n,i,a)>0&&rt(o,a,n)>0!=rt(o,a,i)>0)return!1;return!0}function rt(t,e,r){return $(t[0],t[1],e[0],e[1],r[0],r[1])}function nt(t){var e=t.p,r=t.next.p;return t.minX=Math.min(e[0],r[0]),t.minY=Math.min(e[1],r[1]),t.maxX=Math.max(e[0],r[0]),t.maxY=Math.max(e[1],r[1]),t}function it(t,e){var r={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(r.next=e.next,r.prev=e,e.next.prev=r,e.next=r):(r.prev=r,r.next=r),r}function ot(t,e){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function at(t,e,r){var n=e[0],i=e[1],o=r[0]-n,a=r[1]-i;if(0!==o||0!==a){var s=((t[0]-n)*o+(t[1]-i)*a)/(o*o+a*a);s>1?(n=r[0],i=r[1]):s>0&&(n+=o*s,i+=a*s)}return(o=t[0]-n)*o+(a=t[1]-i)*a}function st(t,e,r,n,i,o,a,s){var u,l,c,h,f=r-t,m=n-e,d=a-i,p=s-o,g=t-i,y=e-o,v=f*f+m*m,x=f*d+m*p,b=d*d+p*p,M=f*g+m*y,w=d*g+p*y,P=v*b-x*x,_=P,E=P;0===P?(l=0,_=1,h=w,E=b):(h=v*w-x*M,(l=x*w-b*M)<0?(l=0,h=w,E=b):l>_&&(l=_,h=w+x,E=b)),h<0?(h=0,-M<0?l=0:-M>v?l=_:(l=-M,_=v)):h>E&&(h=E,-M+x<0?l=0:-M+x>v?l=_:(l=-M+x,_=v));var S=(1-(c=0===h?0:h/E))*i+c*a-((1-(u=0===l?0:l/_))*t+u*r),X=(1-c)*o+c*s-((1-u)*e+u*n);return S*S+X*X}function ut(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}V.default&&(V=V.default),x.exports=H,x.exports.default=H;var lt=y(x.exports);function ct(t){return function(t,e){void 0===e&&(e={});var r=Number(t[0]),n=Number(t[1]),i=Number(t[2]),a=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[r,n];return o([[s,[i,n],[i,a],[r,a],s]],e.properties,{bbox:t,id:e.id})}(m(t))}function ht(t,e,r){if(void 0===r&&(r={}),!0===r.final)return function(t,e){var r=ht(e,t);return r=(r+180)%360}(t,e);var n=d(t),i=d(e),o=u(n[0]),a=u(i[0]),s=u(n[1]),l=u(i[1]),c=Math.sin(a-o)*Math.cos(l),h=Math.cos(s)*Math.sin(l)-Math.sin(s)*Math.cos(l)*Math.cos(a-o);return Math.atan2(c,h)%(2*Math.PI)*180/Math.PI}function ft(t,e){void 0===e&&(e={});var r=0,n=0,o=0;return c(t,(function(t){r+=t[0],n+=t[1],o++}),!0),i([r/o,n/o],e.properties)}function mt(t,e){switch(void 0===e&&(e={}),g(t)){case"Point":return i(d(t),e.properties);case"Polygon":var r=[];c(t,(function(t){r.push(t)}));var n,a,s,u,l,h,f,m,p=ft(t,{properties:e.properties}),y=p.geometry.coordinates,v=0,x=0,b=0,M=r.map((function(t){return[t[0]-y[0],t[1]-y[1]]}));for(n=0;n<r.length-1;n++)u=(a=M[n])[0],h=a[1],l=(s=M[n+1])[0],b+=m=u*(f=s[1])-l*h,v+=(u+l)*m,x+=(h+f)*m;if(0===b)return p;var w=1/(6*(.5*b));return i([y[0]+w*v,y[1]+w*x],e.properties);default:var P=function(t,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0;var r=[];if(c(t,(function(t){r.push([t[0],t[1]])})),!r.length)return null;var n=lt(r,e.concavity);return n.length>3?o([n]):null}(t);return P?mt(P,{properties:e.properties}):ft(t,{properties:e.properties})}}function dt(t){if(!t)throw new Error("geojson is required");var e=[];return function(t,e){f(t,(function(t,r,i,o,a){var s,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(n(t,i,{bbox:o,id:a}),r,0)&&void 0}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var l=0;l<t.coordinates.length;l++){var c=t.coordinates[l];if(!1===e(n({type:s,coordinates:c},i),r,l))return!1}}))}(t,(function(t){!function(t,e){var r=[],n=t.geometry;if(null!==n){switch(n.type){case"Polygon":r=p(n);break;case"LineString":r=[p(n)]}r.forEach((function(r){var n=function(t,e){var r=[];return t.reduce((function(t,n){var i,o,s,u,l,c,h=a([t,n],e);return h.bbox=(o=n,s=(i=t)[0],u=i[1],l=o[0],c=o[1],[s<l?s:l,u<c?u:c,s>l?s:l,u>c?u:c]),r.push(h),n})),r}(r,t.properties);n.forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),s(e)}var pt={exports:{}};function gt(t,e,r,n,i){yt(t,e,r||0,n||t.length-1,i||xt)}function yt(t,e,r,n,i){for(;n>r;){if(n-r>600){var o=n-r+1,a=e-r+1,s=Math.log(o),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);yt(t,e,Math.max(r,Math.floor(e-a*u/o+l)),Math.min(n,Math.floor(e+(o-a)*u/o+l)),i)}var c=t[e],h=r,f=n;for(vt(t,r,e),i(t[n],c)>0&&vt(t,r,n);h<f;){for(vt(t,h,f),h++,f--;i(t[h],c)<0;)h++;for(;i(t[f],c)>0;)f--}0===i(t[r],c)?vt(t,r,f):vt(t,++f,n),f<=e&&(r=f+1),e<=f&&(n=f-1)}}function vt(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function xt(t,e){return t<e?-1:t>e?1:0}function bt(t,e,r){if(!r)return e.indexOf(t);for(let n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function Mt(t,e){wt(t,0,t.children.length,e,t)}function wt(t,e,r,n,i){i||(i=At(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let o=e;o<r;o++){const e=t.children[o];Pt(i,t.leaf?n(e):e)}return i}function Pt(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function _t(t,e){return t.minX-e.minX}function Et(t,e){return t.minY-e.minY}function St(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Xt(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Yt(t,e){const r=Math.max(t.minX,e.minX),n=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-r)*Math.max(0,o-n)}function Bt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Lt(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function At(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function kt(t,e,r,n,i){const o=[e,r];for(;o.length;){if((r=o.pop())-(e=o.pop())<=n)continue;const a=e+Math.ceil((r-e)/n/2)*n;gt(t,a,e,r,i),o.push(e,a,a,r)}}var Ft=Object.freeze({__proto__:null,default:class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const r=[];if(!Lt(t,e))return r;const n=this.toBBox,i=[];for(;e;){for(let o=0;o<e.children.length;o++){const a=e.children[o],s=e.leaf?n(a):a;Lt(t,s)&&(e.leaf?r.push(a):Bt(t,s)?this._all(a,r):i.push(a))}e=i.pop()}return r}collides(t){let e=this.data;if(!Lt(t,e))return!1;const r=[];for(;e;){for(let n=0;n<e.children.length;n++){const i=e.children[n],o=e.leaf?this.toBBox(i):i;if(Lt(t,o)){if(e.leaf||Bt(t,o))return!0;r.push(i)}}e=r.pop()}return!1}load(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(let e=0;e<t.length;e++)this.insert(t[e]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const t=this.data;this.data=e,e=t}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=At([]),this}remove(t,e){if(!t)return this;let r=this.data;const n=this.toBBox(t),i=[],o=[];let a,s,u;for(;r||i.length;){if(r||(r=i.pop(),s=i[i.length-1],a=o.pop(),u=!0),r.leaf){const n=bt(t,r.children,e);if(-1!==n)return r.children.splice(n,1),i.push(r),this._condense(i),this}u||r.leaf||!Bt(r,n)?s?(a++,r=s.children[a],u=!1):r=null:(i.push(r),o.push(a),a=0,s=r,r=r.children[0])}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const r=[];for(;t;)t.leaf?e.push(...t.children):r.push(...t.children),t=r.pop();return e}_build(t,e,r,n){const i=r-e+1;let o,a=this._maxEntries;if(i<=a)return o=At(t.slice(e,r+1)),Mt(o,this.toBBox),o;n||(n=Math.ceil(Math.log(i)/Math.log(a)),a=Math.ceil(i/Math.pow(a,n-1))),o=At([]),o.leaf=!1,o.height=n;const s=Math.ceil(i/a),u=s*Math.ceil(Math.sqrt(a));kt(t,e,r,u,this.compareMinX);for(let i=e;i<=r;i+=u){const e=Math.min(i+u-1,r);kt(t,i,e,s,this.compareMinY);for(let r=i;r<=e;r+=s){const i=Math.min(r+s-1,e);o.children.push(this._build(t,r,i,n-1))}}return Mt(o,this.toBBox),o}_chooseSubtree(t,e,r,n){for(;n.push(e),!e.leaf&&n.length-1!==r;){let r,n=1/0,a=1/0;for(let s=0;s<e.children.length;s++){const u=e.children[s],l=St(u),c=(i=t,o=u,(Math.max(o.maxX,i.maxX)-Math.min(o.minX,i.minX))*(Math.max(o.maxY,i.maxY)-Math.min(o.minY,i.minY))-l);c<a?(a=c,n=l<n?l:n,r=u):c===a&&l<n&&(n=l,r=u)}e=r||e.children[0]}var i,o;return e}_insert(t,e,r){const n=r?t:this.toBBox(t),i=[],o=this._chooseSubtree(n,this.data,e,i);for(o.children.push(t),Pt(o,n);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(n,i,e)}_split(t,e){const r=t[e],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);const o=this._chooseSplitIndex(r,i,n),a=At(r.children.splice(o,r.children.length-o));a.height=r.height,a.leaf=r.leaf,Mt(r,this.toBBox),Mt(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(r,a)}_splitRoot(t,e){this.data=At([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Mt(this.data,this.toBBox)}_chooseSplitIndex(t,e,r){let n,i=1/0,o=1/0;for(let a=e;a<=r-e;a++){const e=wt(t,0,a,this.toBBox),s=wt(t,a,r,this.toBBox),u=Yt(e,s),l=St(e)+St(s);u<i?(i=u,n=a,o=l<o?l:o):u===i&&l<o&&(o=l,n=a)}return n||r-e}_chooseSplitAxis(t,e,r){const n=t.leaf?this.compareMinX:_t,i=t.leaf?this.compareMinY:Et;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,i)&&t.children.sort(n)}_allDistMargin(t,e,r,n){t.children.sort(n);const i=this.toBBox,o=wt(t,0,e,i),a=wt(t,r-e,r,i);let s=Xt(o)+Xt(a);for(let n=e;n<r-e;n++){const e=t.children[n];Pt(o,t.leaf?i(e):e),s+=Xt(o)}for(let n=r-e-1;n>=e;n--){const e=t.children[n];Pt(a,t.leaf?i(e):e),s+=Xt(a)}return s}_adjustParentBBoxes(t,e,r){for(let n=r;n>=0;n--)Pt(e[n],t)}_condense(t){for(let e,r=t.length-1;r>=0;r--)0===t[r].children.length?r>0?(e=t[r-1].children,e.splice(e.indexOf(t[r]),1)):this.clear():Mt(t[r],this.toBBox)}}}),Ot=v(Ft),Rt={};!function(t){function e(t,e,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function r(t,r,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!f(t[0])||!f(t[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:t},r,n)}function n(t,r,n){void 0===n&&(n={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:t},r,n)}function i(t,r,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:t},r,n)}function o(t,e){void 0===e&&(e={});var r={type:"FeatureCollection"};return e.id&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.features=t,r}function a(t,r,n){return void 0===n&&(n={}),e({type:"MultiLineString",coordinates:t},r,n)}function s(t,r,n){return void 0===n&&(n={}),e({type:"MultiPoint",coordinates:t},r,n)}function u(t,r,n){return void 0===n&&(n={}),e({type:"MultiPolygon",coordinates:t},r,n)}function l(e,r){void 0===r&&(r="kilometers");var n=t.factors[r];if(!n)throw new Error(r+" units is invalid");return e*n}function c(e,r){void 0===r&&(r="kilometers");var n=t.factors[r];if(!n)throw new Error(r+" units is invalid");return e/n}function h(t){return 180*(t%(2*Math.PI))/Math.PI}function f(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:1.0936*t.earthRadius},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1.0936133},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},t.feature=e,t.geometry=function(t,e,o){switch(t){case"Point":return r(e).geometry;case"LineString":return i(e).geometry;case"Polygon":return n(e).geometry;case"MultiPoint":return s(e).geometry;case"MultiLineString":return a(e).geometry;case"MultiPolygon":return u(e).geometry;default:throw new Error(t+" is invalid")}},t.point=r,t.points=function(t,e,n){return void 0===n&&(n={}),o(t.map((function(t){return r(t,e)})),n)},t.polygon=n,t.polygons=function(t,e,r){return void 0===r&&(r={}),o(t.map((function(t){return n(t,e)})),r)},t.lineString=i,t.lineStrings=function(t,e,r){return void 0===r&&(r={}),o(t.map((function(t){return i(t,e)})),r)},t.featureCollection=o,t.multiLineString=a,t.multiPoint=s,t.multiPolygon=u,t.geometryCollection=function(t,r,n){return void 0===n&&(n={}),e({type:"GeometryCollection",geometries:t},r,n)},t.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,e||0);return Math.round(t*r)/r},t.radiansToLength=l,t.lengthToRadians=c,t.lengthToDegrees=function(t,e){return h(c(t,e))},t.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},t.radiansToDegrees=h,t.degreesToRadians=function(t){return t%360*Math.PI/180},t.convertLength=function(t,e,r){if(void 0===e&&(e="kilometers"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("length must be a positive number");return l(c(t,e),r)},t.convertArea=function(e,r,n){if(void 0===r&&(r="meters"),void 0===n&&(n="kilometers"),!(e>=0))throw new Error("area must be a positive number");var i=t.areaFactors[r];if(!i)throw new Error("invalid original units");var o=t.areaFactors[n];if(!o)throw new Error("invalid final units");return e/i*o},t.isNumber=f,t.isObject=function(t){return!!t&&t.constructor===Object},t.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!f(t))throw new Error("bbox must only contain numbers")}))},t.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}}(Rt);var Ct={};Object.defineProperty(Ct,"__esModule",{value:!0});var jt=Rt;function It(t,e,r){if(null!==t)for(var n,i,o,a,s,u,l,c,h=0,f=0,m=t.type,d="FeatureCollection"===m,p="Feature"===m,g=d?t.features.length:1,y=0;y<g;y++){s=(c=!!(l=d?t.features[y].geometry:p?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var v=0;v<s;v++){var x=0,b=0;if(null!==(a=c?l.geometries[v]:l)){u=a.coordinates;var M=a.type;switch(h=!r||"Polygon"!==M&&"MultiPolygon"!==M?0:1,M){case null:break;case"Point":if(!1===e(u,f,y,x,b))return!1;f++,x++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(!1===e(u[n],f,y,x,b))return!1;f++,"MultiPoint"===M&&x++}"LineString"===M&&x++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(i=0;i<u[n].length-h;i++){if(!1===e(u[n][i],f,y,x,b))return!1;f++}"MultiLineString"===M&&x++,"Polygon"===M&&b++}"Polygon"===M&&x++;break;case"MultiPolygon":for(n=0;n<u.length;n++){for(b=0,i=0;i<u[n].length;i++){for(o=0;o<u[n][i].length-h;o++){if(!1===e(u[n][i][o],f,y,x,b))return!1;f++}b++}x++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===It(a.geometries[n],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Nt(t,e){var r;switch(t.type){case"FeatureCollection":for(r=0;r<t.features.length&&!1!==e(t.features[r].properties,r);r++);break;case"Feature":e(t.properties,0)}}function Tt(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}function Gt(t,e){var r,n,i,o,a,s,u,l,c,h,f=0,m="FeatureCollection"===t.type,d="Feature"===t.type,p=m?t.features.length:1;for(r=0;r<p;r++){for(s=m?t.features[r].geometry:d?t.geometry:t,l=m?t.features[r].properties:d?t.properties:{},c=m?t.features[r].bbox:d?t.bbox:void 0,h=m?t.features[r].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,l,c,h))return!1;break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(!1===e(o.geometries[n],f,l,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,c,h))return!1;f++}}function Dt(t,e){Gt(t,(function(t,r,n,i,o){var a,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==e(jt.feature(t,n,{bbox:i,id:o}),r,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var u=0;u<t.coordinates.length;u++){var l={type:a,coordinates:t.coordinates[u]};if(!1===e(jt.feature(l,n),r,u))return!1}}))}function qt(t,e){Dt(t,(function(t,r,n){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var a,s=0,u=0,l=0;return!1!==It(t,(function(o,c,h,f,m){if(void 0===a||r>s||f>u||m>l)return a=o,s=r,u=f,l=m,void(i=0);var d=jt.lineString([a,o],t.properties);if(!1===e(d,r,n,m,i))return!1;i++,a=o}))&&void 0}}}))}function Jt(t,e){if(!t)throw new Error("geojson is required");Dt(t,(function(t,r,n){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,r,n,0,0))return!1;break;case"Polygon":for(var a=0;a<o.length;a++)if(!1===e(jt.lineString(o[a],t.properties),r,n,a))return!1}}}))}Ct.coordAll=function(t){var e=[];return It(t,(function(t){e.push(t)})),e},Ct.coordEach=It,Ct.coordReduce=function(t,e,r,n){var i=r;return It(t,(function(t,n,o,a,s){i=0===n&&void 0===r?t:e(i,t,n,o,a,s)}),n),i},Ct.featureEach=Tt,Ct.featureReduce=function(t,e,r){var n=r;return Tt(t,(function(t,i){n=0===i&&void 0===r?t:e(n,t,i)})),n},Ct.findPoint=function(t,e){if(e=e||{},!jt.isObject(e))throw new Error("options is invalid");var r,n=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.coordIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),s=s||t.features[n].properties,r=t.features[n].geometry;break;case"Feature":s=s||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var u=r.coordinates;switch(r.type){case"Point":return jt.point(u,s,e);case"MultiPoint":return i<0&&(i=u.length+i),jt.point(u[i],s,e);case"LineString":return a<0&&(a=u.length+a),jt.point(u[a],s,e);case"Polygon":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a),jt.point(u[o][a],s,e);case"MultiLineString":return i<0&&(i=u.length+i),a<0&&(a=u[i].length+a),jt.point(u[i][a],s,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),a<0&&(a=u[i][o].length-a),jt.point(u[i][o][a],s,e)}throw new Error("geojson is invalid")},Ct.findSegment=function(t,e){if(e=e||{},!jt.isObject(e))throw new Error("options is invalid");var r,n=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.segmentIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),s=s||t.features[n].properties,r=t.features[n].geometry;break;case"Feature":s=s||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var u=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=u.length+a-1),jt.lineString([u[a],u[a+1]],s,e);case"Polygon":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a-1),jt.lineString([u[o][a],u[o][a+1]],s,e);case"MultiLineString":return i<0&&(i=u.length+i),a<0&&(a=u[i].length+a-1),jt.lineString([u[i][a],u[i][a+1]],s,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),a<0&&(a=u[i][o].length-a-1),jt.lineString([u[i][o][a],u[i][o][a+1]],s,e)}throw new Error("geojson is invalid")},Ct.flattenEach=Dt,Ct.flattenReduce=function(t,e,r){var n=r;return Dt(t,(function(t,i,o){n=0===i&&0===o&&void 0===r?t:e(n,t,i,o)})),n},Ct.geomEach=Gt,Ct.geomReduce=function(t,e,r){var n=r;return Gt(t,(function(t,i,o,a,s){n=0===i&&void 0===r?t:e(n,t,i,o,a,s)})),n},Ct.lineEach=Jt,Ct.lineReduce=function(t,e,r){var n=r;return Jt(t,(function(t,i,o,a){n=0===i&&void 0===r?t:e(n,t,i,o,a)})),n},Ct.propEach=Nt,Ct.propReduce=function(t,e,r){var n=r;return Nt(t,(function(t,i){n=0===i&&void 0===r?t:e(n,t,i)})),n},Ct.segmentEach=qt,Ct.segmentReduce=function(t,e,r){var n=r,i=!1;return qt(t,(function(t,o,a,s,u){n=!1===i&&void 0===r?t:e(n,t,o,a,s,u),i=!0})),n};var zt={};Object.defineProperty(zt,"__esModule",{value:!0});var Ut=Ct;function Vt(t){var e=[1/0,1/0,-1/0,-1/0];return Ut.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}Vt.default=Vt,zt.default=Vt;var Zt=Ot,$t=Rt,Ht=Ct,Kt=zt.default,Qt=Ht.featureEach;Ht.coordEach;var Wt=$t.featureCollection;function te(t){var e=new Zt(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:Kt(t),Zt.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:Kt(t),e.push(t)})):Qt(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:Kt(t),e.push(t)})),Zt.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:Kt(t),Zt.prototype.remove.call(this,t,e)},e.clear=function(){return Zt.prototype.clear.call(this)},e.search=function(t){var e=Zt.prototype.search.call(this,this.toBBox(t));return Wt(e)},e.collides=function(t){return Zt.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=Zt.prototype.all.call(this);return Wt(t)},e.toJSON=function(){return Zt.prototype.toJSON.call(this)},e.fromJSON=function(t){return Zt.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=Kt(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=Kt(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}pt.exports=te,pt.exports.default=te;var ee,re=y(pt.exports);function ne(t,e){var r={},i=[];if("LineString"===t.type&&(t=n(t)),"LineString"===e.type&&(e=n(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var o=ie(t,e);return o&&i.push(o),s(i)}var a=re();return a.load(dt(e)),h(dt(t),(function(t){h(a.search(t),(function(e){var n=ie(t,e);if(n){var o=p(n).join(",");r[o]||(r[o]=!0,i.push(n))}}))})),s(i)}function ie(t,e){var r=p(t),n=p(e);if(2!==r.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==n.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=r[0][0],a=r[0][1],s=r[1][0],u=r[1][1],l=n[0][0],c=n[0][1],h=n[1][0],f=n[1][1],m=(f-c)*(s-o)-(h-l)*(u-a),d=(h-l)*(a-c)-(f-c)*(o-l),g=(s-o)*(a-c)-(u-a)*(o-l);if(0===m)return null;var y=d/m,v=g/m;return y>=0&&y<=1&&v>=0&&v<=1?i([o+y*(s-o),a+y*(u-a)]):null}function oe(t,e,n,i){void 0===i&&(i={}),t.addSource(e,r({type:"geojson",data:n},i))}function ae(t,e){t.addLayer(e)}function se(t,e){return ht(i(t),i(e))}function ue(t,e){return void 0===e&&(e=180),t-e}function le(t,e,r){var n=m(e);r&&t.fitBounds(n,{padding:{top:r[0],bottom:r[1],left:r[2],right:r[3]}})}function ce(t,e){return t.filter((function(t){return e===g(t)}))}function he(t){return t.map((function(t){return d(t)}))}function fe(t){if(!t)return[];var e=[];return f(t,(function(t){var r=p(t);e.push(r[0]),e.push(r[r.length-1])})),e}function me(t){if(!t)return[];var e=[];return f(t,(function(t){var r,n,o=(n=[],"FeatureCollection"===(r=t).type?h(r,(function(t){c(t,(function(e){n.push(i(e,t.properties))}))})):c(r,(function(t){n.push(i(t,r.properties))})),s(n));h(o,(function(t){var r=d(t);e.push(r)}))})),e}!function(t){t.Point="Point",t.LineString="LineString",t.MultiLineString="MultiLineString",t.Polygon="Polygon",t.MultiPolygon="MultiPolygon"}(ee||(ee={})),t.checkCoordinate=function(t){var e="坐标应该为一个只有两个元素的数组";if(!Array.isArray(t))throw new Error(e);if(Array.isArray(t)&&t.length>2)throw new Error(e);if("number"!=typeof t[0]||"number"!=typeof t[1])throw new Error("坐标值应是 number")},t.clearAllSourceAndLayer=function(t,e){for(var r in e)r.toLocaleLowerCase().includes("layer")&&t.getLayer(e[r])&&t.removeLayer(e[r]),r.toLocaleLowerCase().includes("source")&&t.getSource(e[r])&&t.removeSource(e[r])},t.destroyMap=function(t){t&&t.remove()},t.getBearing=se,t.getCenterBetweenRightPointIntersection=function(t){var e=Math.max.apply(Math,t.map((function(t){return t[0]}))),r=t.find((function(t){return t[0]===e}));if(r){var n=[r[0],r[1]+.5],i=[r[0],r[1]-.5],s=d(mt(o([t]))),u=[s[0]+.5,s[1]],l=[s[0]-.5,s[1]];return d(ne(a([r,n,i],{name:"line 1"}),a([s,u,l],{name:"line 2"})).features[0])}},t.getFeatureTypeList=ce,t.getLineEndpoint=function(){var t=116.46,e=39.92,r=fe(s([a([[t-.005,e+.005],[t-.005,e-.005]]),a([[t-.005,e],[t,e],[t+.009,e]])]));console.log("lineStringEndpoint",r)},t.getLineStringEndpoint=fe,t.getPolygonVertex=me,t.getPopupDom=function(t,r){var n=e.createApp(t,r),i=document.createElement("div");return n.mount(i).$el},t.getRotation=ue,t.getRotationByCoordinate=function(t,e,r){return void 0===r&&(r=180),ue(se(t,e),r)},t.hiddenLayer=function(t,e){t&&t.getLayer(e)&&t.setLayoutProperty(e,"visibility","none")},t.hiddenLayers=function(t,e){Array.isArray(e)&&e.length>0&&e.forEach((function(e){t.getLayer(e)&&t.setLayoutProperty(e,"visibility","none")}))},t.moveAndZoom=function(t,e,r){void 0===r&&(r=12),t.easeTo({center:e,zoom:r})},t.moveMap=function(t,e){t.panTo(e)},t.pointListToCoordList=he,t.removeMarkers=function(t){Array.isArray(t)?t.forEach((function(t){return t&&t.remove()})):console.error("value markers is not array")},t.removeMarkersOrPopups=function(t){Array.isArray(t)?t.forEach((function(t){return t.remove()})):console.error("list is not array")},t.setLayerIdName=function(t,e){return void 0===e&&(e=""),"".concat(t,"-").concat(e,"-layer")},t.setMultipleLayerSourceData=function(t,e,r,n,i){void 0===i&&(i={});try{var o=i.afterSetData,a=i.afterSetLayer,s=i.sourceOption,u=void 0===s?{}:s,l=t.getSource(e);l?(l.setData(n),Array.isArray(r)&&r.forEach((function(e){o&&o(t,e.id)}))):(oe(t,e,n,u),Array.isArray(r)&&r.forEach((function(e){ae(t,e),a&&a(t,e.id)})))}catch(t){}},t.setPbfSourceData=function(t,e,r,n,i){void 0===i&&(i={});var o=i.useToken,a=void 0!==o&&o,s=i.token;a&&(n=n.map((function(t){return t+s}))),t.getSource(e)||(t.addSource(e,{type:"vector",tiles:n}),ae(t,r))},t.setSourceData=function(t,e,r,n,i){void 0===i&&(i={});try{var o=i.afterSetData,a=i.afterSetLayer,s=i.sourceOption,u=t.getSource(e);u?(u.setData(n),o&&o(t,r.id)):(oe(t,e,n,s),ae(t,r),a&&a(t,r.id))}catch(t){console.error(t)}},t.setSourceIdName=function(t,e){return void 0===e&&(e=""),"".concat(t,"-").concat(e,"-source")},t.setViewPort=function(t,e,r){if(void 0===e&&(e=[]),void 0===r&&(r={}),t){var n=r.boundary,o=void 0===n?[150,250,150,250]:n,a=ce(e,ee.Point),u=ce(e,ee.LineString),l=ce(e,ee.MultiLineString),c=ce(e,ee.Polygon),h=ce(e,ee.MultiPolygon),f=he(a).concat(fe(s(u))).concat(fe(s(l))).concat(me(s(c))).concat(me(s(h)));if(f.length>0){var m=ct(s(f.map((function(t){return i(t)}))));m.bbox?t.fitBounds(m.bbox,{padding:{top:o[0],bottom:o[1],left:o[2],right:o[3]}}):le(t,m,o)}}},t.setViewPortByPolygon=le,t.setZoom=function(t,e){e>10&&t.setZoom(e)},t.showLayer=function(t,e){t&&t.getLayer(e)&&t.setLayoutProperty(e,"visibility","visible")},t.showLayers=function(t,e){Array.isArray(e)&&e.length>0&&e.forEach((function(e){t.getLayer(e)&&t.setLayoutProperty(e,"visibility","visible")}))}}));
